<!DOCTYPE html>
<!--[if lt IE 8]>
<html class="ie" dir="ltr" lang="en-US">
<![endif]-->
<!--[if ! lt IE 8 ]><!-->
<html dir="ltr" lang="en-US">
<!--<![endif]-->

<head>
<meta charset="UTF-8" />
<link rel="stylesheet" media="all" href="http://kecebongsoft.com/theme/css/style.css" />
<script>
var templateDir = "http://kecebongsoft.com/theme/";
// make windows load system fonts
if(navigator.appVersion.indexOf("Win") != -1) {
    var windowsCss = document.createElement("link");

    windowsCss.setAttribute("rel", "stylesheet");
    windowsCss.setAttribute("media", "all");
    windowsCss.setAttribute("href", "http://kecebongsoft.com/theme/css/windows.css");

    var head = document.getElementsByTagName("head")[0];
    head.appendChild(windowsCss);

    windows = true;

} else {
    var fontCss = document.createElement("link");

    fontCss.setAttribute("rel", "stylesheet");
    fontCss.setAttribute("media", "all");
    fontCss.setAttribute("href", "http://kecebongsoft.com/theme/css/fonts-1-2.css");

    var head = document.getElementsByTagName("head")[0];
    head.appendChild(fontCss);
}
</script>

<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Dedi P. : Konversi vektor screen ke world pada orthogonal projection</title>

<link href="http://kecebongsoft.com/" type="application/atom+xml" rel="alternate" title="Dedi P. ATOM Feed" />

<!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

</head>

<body>

    <article id='content'>
        <header> <a id="logo" href="http://kecebongsoft.com">Dedi P.</a> </header>
        

<section id="post">
    <h1 class="section_separator">
        <span>Sun 28 September 2008</span>
    </h1>
    <article id="post-9337" class="post">

        <h1 class="post_title">Konversi vektor screen ke world pada orthogonal projection</h1>
        <p>Banyak yang bingung mencari nilai vektor (x, y) pada 3D world yang berasal dari vektor screen. Biasanya teknik ini disebut picking. Kali ini kita akan melakukan konversi vektor screen ke vektor 3D world, tapi dalam orthogonal projection, yang berarti posisi y axis kamera sama nilainya dengan posisi y axis poros kamera. Disini kita menggunakan OpenGL dan
<a href="http://glfw.sourceforge.net/">
 GLFW
</a>
sebagai frameworknya.</p>
<p>Banyak sekali teknik picking yang sudah ada, saya nggak akan ngebahas banyak tentang matematika untuk mendapatkan nilai vektornya, karena OpenGL sendiri punya sebuah library bernama GLU, kita akan menggunakan fungsi
<a href="http://www.opengl.org/documentation/specs/man_pages/hardcopy/GL/html/glu/unproject.html">
 gluUnProject()
</a>
milik GLU untuk melakukan konversi koordinat window ke koordinat objek.</p>
<div class="highlight"><pre>
</pre></div>


<p>GLdouble posx,posy,posz; // variabel untuk menyimpan hasil konversi
int mx,my; // variabel untuk menyimpan koordinat mouse</p>
<p>// ambil koordinat mouse dengan GLFW, bisa juga menggunakan lib lain (SDL, etc)
glfwGetMousePos(&amp;mx;,&amp;my;); </p>
<p>glLoadIdentity(); // reset matrix
GLdouble modelMatrix[16];
glGetDoublev(GL_MODELVIEW_MATRIX,modelMatrix);
GLdouble projMatrix[16];
glGetDoublev(GL_PROJECTION_MATRIX,projMatrix);
int viewport[4];
glGetIntegerv(GL_VIEWPORT,viewport);
gluUnProject(mx,my,0,modelMatrix,projMatrix,viewport,&amp;posx;,&amp;posy;,&amp;posz;);</p>
<p>posx<em>=(zoom * 10); // hasil konversi dikalikan dengan (zoom * 10) <br />
posy</em>=(zoom * 10);</p>
<p>posy*=-1; // karena arah y axis pada 3D world umumnya berbeda dengan y axis pada 2D (orthogonal), jadi kita kalikan dengan -1</p>
<p>std::cout &lt;&lt; posx &lt;&lt; ", " &lt;&lt; posy &lt;&lt; "\n"; // print output konversi</p>
<p>Disini pertama-tama kita ambil dulu koordinat mouse, kemudian ambil setting model view matrix,projection matrix, dan viewport yang sudah di set sebelumnya, setelah itu gunakan gluUnProject untuk melakukan konversi (silahkan lihat manual gluUnProject pada website OGL).</p>
<p>Variabel zoom adalah distance antara posisi Z kamera dengan posisi Z poros kamera, kita kalikan dengan 10 karena nilai konversi sebelumnya adalah nilai floating point yang sangat kecil. Terakhir mengalikan posy dengan -1 untuk menormalkan posisi y axisnya sesuai dengan 3D world.</p>
<p>Banyak sekali implementasi teknik picking yang tersebar di internet. Teknik diatas adalah salah satu yang paling simpel :roll: .</p>
        <span class="post_fleuron symbol">Ð</span>

    </article>

</section>

    </article>


    <footer>
        <h1 class="section_separator"><span></span></h1>
        <nav>
            <a href='/2010/01/about.html' class='site-links'>Siapa saya</a>&nbsp;|&nbsp;
            <a href='/archives.html' class='site-links'>Arsip tulisan</a>
        </nav>
        <span>&copy;&nbsp;2004-2014 Dedi Purwanto</span>
    </footer>

    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-36468240-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>