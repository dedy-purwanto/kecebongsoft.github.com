<!DOCTYPE html>
<!--[if lt IE 8]>
<html class="ie" dir="ltr" lang="en-US">
<![endif]-->
<!--[if ! lt IE 8 ]><!-->
<html dir="ltr" lang="en-US">
<!--<![endif]-->

<head>
<meta charset="UTF-8" />
<link rel="stylesheet" media="all" href="http://kecebongsoft.com/theme/css/style.css" />
<script>
var templateDir = "http://kecebongsoft.com/theme/";
// make windows load system fonts
if(navigator.appVersion.indexOf("Win") != -1) {
    var windowsCss = document.createElement("link");

    windowsCss.setAttribute("rel", "stylesheet");
    windowsCss.setAttribute("media", "all");
    windowsCss.setAttribute("href", "http://kecebongsoft.com/theme/css/windows.css");

    var head = document.getElementsByTagName("head")[0];
    head.appendChild(windowsCss);

    windows = true;

} else {
    var fontCss = document.createElement("link");

    fontCss.setAttribute("rel", "stylesheet");
    fontCss.setAttribute("media", "all");
    fontCss.setAttribute("href", "http://kecebongsoft.com/theme/css/fonts-1-2.css");

    var head = document.getElementsByTagName("head")[0];
    head.appendChild(fontCss);
}
</script>
<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<script src="http://kecebongsoft.com/theme/js/moment-with-langs.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:locale" content="en_US" />

<meta property="og:type" content="article" />
<meta property="og:title" content="Mengatasi lost focus pada Direct Input" />
<meta property="og:description" content="Direct Input adalah salah satu bagian dari DirectX yang digunakan untuk memanajemen inputan user baik berupa keyboard, joystick, mouse, dan lain sebagainya. Belakangan ini dakuw lagi mencoba menggunakan direct input untuk memproses inputan keyboard. Inputan user tersebut diawasi dalam sebuah looping. Tapi muncul sebuah masalah... Ketika program kita kehilangan fokus ..." />
<meta property="og:url" content="2007/09/mengatasi-lost-focus-pada-direct-input.html" />


<title>Dedi P. : Mengatasi lost focus pada Direct Input</title>

<link href="http://kecebongsoft.com/" type="application/atom+xml" rel="alternate" title="Dedi P. ATOM Feed" />

<!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

</head>

<body>

    <article id='content'>
        <header> <a id="logo" href="http://kecebongsoft.com">Dedi P.</a> </header>
        

<section id="post">
    <h1 class="section_separator">
        <span>Mon 03 September 2007</span>
    </h1>
    <article id="" class="post">

        <h1 class="post_title">Mengatasi lost focus pada Direct Input</h1>
        <p>Direct Input adalah salah satu bagian dari DirectX yang digunakan untuk memanajemen inputan user baik berupa keyboard, joystick, mouse, dan lain sebagainya. Belakangan ini dakuw lagi mencoba menggunakan direct input untuk memproses inputan keyboard. Inputan user tersebut diawasi dalam sebuah looping. Tapi muncul sebuah masalah...
<!--more-->
Ketika program kita kehilangan fokus (user mengklik program lain atau menekan alt+tab), kemudian setelah program kita mendapatkan fokus kembali, direct input tidak lagi bekerja. Hmm.. Setelah usut punya usut, ternyata direct input gagal meng-acquire device ketika program kehilangan fokus. Di dokumentasi Software Development Kit (SDK) juga tidak menyertakan sample untuk menghandle direct input ketika program kehilangan fokus. Gimana ya caranya mengetahui direct input gagal di acquire?. Di contoh direct input pada dokumentasi SDK, ada sebuah komentar yang mengatakan bahwa dalam sebuah looping, kita bisa menangkap error yang dibuat oleh direct input, sehingga kita bisa tahu direct input kehilangan fokus atau tidak. Jadi dakuw mengikuti nasehat komentar tersebut, dan berhasil :-D. So here is the damn stuff :
<pre>
// hr adalah HRESULT
// lpdiDevice adalah LPDIRECTINPUTDEVICE8
hr=lpdiDevice-&gt;GetDeviceState(sizeof(buffer),(LPVOID)&amp;buffer);</p>
<p>if(FAILED(hr)){</p>
<p>if(hr = DIERR_INPUTLOST){</p>
<div class="highlight"><pre><span class="n">hr</span><span class="o">=</span><span class="n">lpdiDevice</span><span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span><span class="n">Acquire</span><span class="p">();</span>
</pre></div>


<p>}</p>
<p>}</pre>
Kode tersebut diletakan dibagian awal dari sebuah looping direct input. Anggaplah kita sedang membuat function looping untuk menangkap inputan keyboard, maka kode diatas diletakan dibagian awal function looping. Yang pernah punya masalah yang sama silahkan mencoba kode diatas :-D.</p>
        <span class="post_fleuron symbol">Ð</span>

        <div id='comments'></div>

<script>
$(function(){

    function format_comment(name, comment, comment_date) {
        moment.lang('id');
        comment_date = moment(comment_date);

        return  "<div class='comment' style='margin-bottom:20px;'><span style='font-weight:bold;'>" + name + "</span> " + 
        "<span style='color:#acacac'>" + comment_date.format('Do MMMM YYYY') + "</span><br />" + "<p style='color:#8a8a8a'>" + comment + "</p></div>";
    }

    $.getJSON("http://kecebongsoft-blog-comments.appspot.com/get/?url=2007/09/mengatasi-lost-focus-pada-direct-input.html", function(data){
        comments = data['comments'];

        form_html = "<form method='post' action=''>" +
            "<input type='text' id='name' name='name' placeholder='Nama' style='border:none;background-color:inherit;border-bottom:1px dotted #acacac;width:100%' ><br />" +
            "<textarea name='comment' id='comment' placeholder='Komentar' style='border:none;background-color:inherit;border-bottom:1px dotted #acacac;width:100%;height:70px;'></textarea><br />" +
            "<div style='float:right'><a id='comment_submit' href='#'>Kirim</a></div>" +
            "<div style='clear:both;'></div>" + 
            "</form>";
            
        
        comment_list = "";
        comment_list += "<div id='comment_list'>";
        comment_list += "<div id='form'>" + form_html + "</div><div id='comments'>";
        if (comments.length > 0) {

            $("#comments").append("" +
                "<h3 style='text-align:center;'>" +
                    "<a href='#' id='comments_toggle'>Lihat komentar (" + comments.length + ")</a>" +
                    "</h3>");




            for (i = 0; i < comments.length ; i += 1 ) {
                c = comments[i];
                comment_list += format_comment(c['name'], c['comment'], c['date']);
            }




        } else {
            $("#comments").append("<h3 style='text-align:center;'><a href='#' id='comments_toggle'>Kirim komentar</a></h3>");
        }

        comment_list += "</div></div>";
        $("#comments").append(comment_list);

        $("#comments #comment_list #form #comment_submit").click(function(e){
            e.preventDefault();

            $name = $("#comments #comment_list #form form #name");
            $comment = $("#comments #comment_list #form form #comment");

            if ($name.val() == '' || $comment.val() == '') {
                console.log('type first');
            }else{
                console.log($name.val());
                console.log($comment.val());
                $.getJSON('http://kecebongsoft-blog-comments.appspot.com/post/?url=2007/09/mengatasi-lost-focus-pada-direct-input.html&name=' + 
                    $name.val() + '&comment=' + $comment.val(), function(new_comment){

                    $("#comments #comment_list #comments").prepend(format_comment(new_comment['name'], new_comment['comment'], new_comment['date']));

                    $name.val('');
                    $comment.val('');
                });

            }

            return false;
        });
        $("#comments #comment_list").hide();
        $("#comments_toggle").click(function(e){
            e.preventDefault();
            $("#comment_list").show();
            return false;
        });
    });

});
</script>
        

    </article>

</section>

        <footer>
            <h1 class="section_separator"><span></span></h1>
            <nav>
                <a href='/2001/01/about.html' class='site-links'>Siapa saya</a> | 
                <a href='/archives.html' class='site-links'>Arsip tulisan</a>
            </nav>
            <span>&copy;&nbsp;2004-2014 Dedi Purwanto</span>
        </footer>
    </article>



    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-36468240-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>