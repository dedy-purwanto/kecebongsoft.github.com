<!DOCTYPE html>
<!--[if lt IE 8]>
<html class="ie" dir="ltr" lang="en-US">
<![endif]-->
<!--[if ! lt IE 8 ]><!-->
<html dir="ltr" lang="en-US">
<!--<![endif]-->

<head>
<meta charset="UTF-8" />
<link rel="stylesheet" media="all" href="http://kecebongsoft.com/theme/css/style.css" />
<script>
var templateDir = "http://kecebongsoft.com/theme/";
// make windows load system fonts
if(navigator.appVersion.indexOf("Win") != -1) {
    var windowsCss = document.createElement("link");

    windowsCss.setAttribute("rel", "stylesheet");
    windowsCss.setAttribute("media", "all");
    windowsCss.setAttribute("href", "http://kecebongsoft.com/theme/css/windows.css");

    var head = document.getElementsByTagName("head")[0];
    head.appendChild(windowsCss);

    windows = true;

} else {
    var fontCss = document.createElement("link");

    fontCss.setAttribute("rel", "stylesheet");
    fontCss.setAttribute("media", "all");
    fontCss.setAttribute("href", "http://kecebongsoft.com/theme/css/fonts-1-2.css");

    var head = document.getElementsByTagName("head")[0];
    head.appendChild(fontCss);
}
</script>
<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Dedi P. : Mendapatkan nilai FPS - Bagian 2</title>

<link href="http://kecebongsoft.com/" type="application/atom+xml" rel="alternate" title="Dedi P. ATOM Feed" />

<!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

</head>

<body>

    <article id='content'>
        <header> <a id="logo" href="http://kecebongsoft.com">Dedi P.</a> </header>
        

<section id="post">
    <h1 class="section_separator">
        <span>Tue 13 November 2007</span>
    </h1>
    <article id="" class="post">

        <h1 class="post_title">Mendapatkan nilai FPS - Bagian 2</h1>
        <p>Setelah post sebelumnya membahas tentang bagaimana cara mendapatkan nilai FPS dengan mengambil nilai waktu menggunakan fungsi GetTickCount(), sekarang kita akan mencoba mengambil nilai fps yang lebih presisi, kali ini menggunakan fungsi QueryPerformanceCounter dan QueryPerformanceFrequency, funsi ini akan menghitung "tick" atau clock prosesor sehingga hasilnya lebih akurat dari GetTickCount. Aturan mainnya agak berbeda dari cara menghitung FPS yang sebelumnya, urutan adalah sebagai berikut</p>
<ol>
<li>Ambil nilai frekuensi tick (f)</li>
<li>Ambil nilai waktu sekarang (w1)</li>
<li>Mulai Render</li>
<li>Hentikan Render</li>
<li>Ambil nilai waktu sekarang (w2)</li>
<li>delta waktu = w2-21</li>
<li>waktu render = delta waktu/frekuensi</li>
<li>fps = 1 / waktu render</li>
</ol>
<p>Dari urutan diatas, maka kita buat satu fungsi untuk menghitung fps dengan lebih presisi :
    :::txt
void Looping()
{ <br />
    static double rendertime;
    static double fps;
    static  __int64 w1,w2,freq;</p>
<div class="highlight"><pre><span class="n">QueryPerformanceFrequency</span><span class="p">((</span><span class="n">LARGE_INTEGER</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">amp</span><span class="p">;</span><span class="n">freq</span><span class="p">;);</span>
<span class="n">QueryPerformanceCounter</span><span class="p">((</span><span class="n">LARGE_INTEGER</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">amp</span><span class="p">;</span><span class="n">w1</span><span class="p">;);</span>

<span class="cm">/* Mulai rutinitas render disini */</span>

<span class="cm">/* Hentikan rutinitas render disini */</span>

<span class="n">QueryPerformanceCounter</span><span class="p">((</span><span class="n">LARGE_INTEGER</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">amp</span><span class="p">;</span><span class="n">w2</span><span class="p">;);</span>
<span class="n">rendertime</span><span class="o">=</span><span class="p">(</span><span class="kt">double</span><span class="p">)(</span><span class="n">w2</span><span class="o">-</span><span class="n">w1</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="kt">double</span><span class="p">)(</span><span class="n">freq</span><span class="p">);</span>
<span class="n">fps</span><span class="o">=</span><span class="p">(</span><span class="kt">double</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">rendertime</span><span class="p">;</span>
</pre></div>


<p>}</p>
<p>Pertama-tama kita melakukan casting terhadap variabel w1, w2 dan freq, karena tipenya adalah integer 64 dan parameter untuk fungsi QueryPerformanceFrequency/QueryPerformanceCounter adalah LARGE_INTEGER. Pada baris terakhir, kita cast hasil delta waktu menjadi double karena tipe dari rendertime dan fps adalah double.</p>
<p>Met mencoba ya :D</p>
        <span class="post_fleuron symbol">Ð</span>


        

    </article>

</section>

        <footer>
            <h1 class="section_separator"><span></span></h1>
            <nav>
                <a href='/2001/01/about.html' class='site-links'>Siapa saya</a> | 
                <a href='/archives.html' class='site-links'>Arsip tulisan</a>
            </nav>
            <span>&copy;&nbsp;2004-2014 Dedi Purwanto</span>
        </footer>
    </article>



    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-36468240-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>
</body>
</html>