<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Dedi Purwanto" />
        <meta name="copyright" content="Dedi Purwanto" />

<meta name="keywords" content=", wordpress, " />
        <title>Object picking pada Box2D  · Dedi P.
</title>
        <link href="http://cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="http://kecebongsoft.com/theme/css/style.css" media="screen">
        <link rel="stylesheet" type="text/css" href="http://kecebongsoft.com/theme/css/solarizedlight.css" media="screen">
        <link rel="shortcut icon" href="http://kecebongsoft.com/theme/images/favicon.ico" type="image/x-icon" />
        <link rel="apple-touch-icon" href="http://kecebongsoft.com/theme/images/apple-touch-icon.png" />
        <link rel="apple-touch-icon" sizes="57x57" href="http://kecebongsoft.com/theme/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="http://kecebongsoft.com/theme/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="http://kecebongsoft.com/theme/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="http://kecebongsoft.com/theme/images/apple-touch-icon-144x144.png" />
        <link rel="icon" href="http://kecebongsoft.com/theme/images/apple-touch-icon-144x144.png" />
        <link href="http://kecebongsoft.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Dedi P. - Full Atom Feed" />
        <link href="http://kecebongsoft.com/feeds/pages.atom.xml" type="application/atom+xml" rel="alternate" title="Dedi P. - pages Category Atom Feed" />
        <link href="http://kecebongsoft.com/feeds/posts.atom.xml" type="application/atom+xml" rel="alternate" title="Dedi P. - posts Category Atom Feed" />
        <link href="http://kecebongsoft.com/feeds/tumblr.atom.xml" type="application/atom+xml" rel="alternate" title="Dedi P. - tumblr Category Atom Feed" />
        <link href="http://kecebongsoft.com/feeds/wordpress.atom.xml" type="application/atom+xml" rel="alternate" title="Dedi P. - wordpress Category Atom Feed" />
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36468240-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="http://kecebongsoft.com/"><span class=site-name>Dedi P.</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="http://kecebongsoft.com">Home</a></li>
                            <li ><a href="http://kecebongsoft.com/2001/01/pages/about.html">Tentang Saya</a></li>
                            <li ><a href="http://kecebongsoft.com/categories.html">Categories</a></li>
                            <li ><a href="http://kecebongsoft.com/tags.html">Tags</a></li>
                            <li ><a href="http://kecebongsoft.com/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="http://kecebongsoft.com/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page_header span10 offset2">
    <h1><a href="http://kecebongsoft.com/2011/01/object-picking-pada-box2d.html"> Object picking pada Box2D  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            <p>Beberapa minggu lalu saya sempat membuat fungsi sendiri untuk mouse picking di Box2D. Singkatnya, saya punya beberapa object di Box2D yang akan mentrigger respon berbeda ketika diklik oleh mouse. Kasus utamanya bukan tentang repson yang berbeda, tapi bagaimana caranya bisa mendapatkan posisi mouse di Box2D, sedangkan satuan yang digunakan berbeda, yaitu pixel (untuk stage), dan meter (untuk box2D). Di demo Box2D ada contoh mekanisme Mouse-picking. Yaitu dengan membuat sebuah object box2D super kecil yang kemudian akan diset auto drag, lalu sisanya hanya tinggal mentrigger pengecekan koordinat object tersebut didalam event MouseDown().</p>
<p>Rasanya solusi diatas terlalu repot, jadi saya buat solusi singkat aja, yaitu dengan melakukan konversi satuan dari pixel ke meter. Lihat kode dibawah:</p>
<div class="highlight"><pre>
</pre></div>


<p>public function b2Val(val:Number):Number {return val / UNIT_SCALE;}
public function mcGameDebug_Click(e:MouseEvent):void {
var mx:int = e.stageX -  mcGameDebug.x;
var my:int = e.stageY -  mcGameDebug.y;
var hit:Boolean;
for (var i:int = 0; i &amp;lt; shapes.length; i++) {
    var bd:b2Body = ballBody;
    hit = bd.GetFixtureList().TestPoint(new b2Vec2(b2Val(mx), b2Val(my)));
    if (hit) {
        // action goes here...
        break;
    }             <br />
}
}</p>
<p>Simple sekali dua fungsi diatas, pertama ada event listener yang setiap kali di trigger, akan mengambil posisi mouse yang dipengaruhi oleh mcGameDebug (stage yang kita pakai untuk render semua debug data box2D). Lalu ada boolean hit yang menentukan apakah posisi mouse bersentuhan dengan ballBody (ballBody adalah global variabel, bisa apapun sesuai kebutuhan). Lalu ada TestPoint() untuk mengecek apakah posisi mouse "mengklik" ballBody. Dan jika ya, maka tinggal kita beri action spesifik. Disana juga ada fungsi b2Val yang akan melakukan konversi dari pixel ke meter.</p>
<p>And that's it, nggak perlu buat place holder kecil untuk mouse seperti demo Box2D :D</p>
            <aside>
            <hr/>
            <nav>
            <ul class="articles_timeline">
 
                <li class="previous_article">« <a href="http://kecebongsoft.com/2010/12/mulai-beres-beres-besok-bakal-balik-ke.html" title="Previous: Mulai beres-beres, besok bakal balik ke ...">Mulai beres-beres, besok bakal balik ke ...</a></li>
 
                <li class="next_article"><a href="http://kecebongsoft.com/2011/01/28-januari-2011.html" title="Next: 28 Januari, 2011">28 Januari, 2011</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
 
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2011-01-23T11:39:27">Jan 23, 2011</time>
            <h4>Category</h4>
            <a class="category-link" href="/categories.html#wordpress-ref">wordpress</a> 

        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    </body>
</html>